<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BA Calculator & Aide Memoire</title>
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --bg: #0b1120; --card: #1e293b; --accent: #3b82f6; --text: #ffffff; --gold: #f59e0b; --border: #334155; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; }
        .container { max-width: 500px; margin: auto; }
        
        .input-card { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 20px; }
        .input-row { display: flex; align-items: center; gap: 10px; margin-top: 10px; }
        .label-text { font-size: 0.8rem; color: #94a3b8; }
        
        input { background: #334155; border: 1px solid #475569; color: white; padding: 12px; border-radius: 10px; font-size: 1.1rem; }
        input[type="time"] { flex-grow: 2; }
        input[type="number"] { width: 80px; text-align: center; }
        
        button { background: #2563eb; color: white; border: none; padding: 12px 15px; border-radius: 10px; font-weight: bold; }
        
        table { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
        th { color: #94a3b8; font-size: 0.75rem; text-transform: uppercase; padding: 10px; border-bottom: 1px solid var(--border); }
        td { padding: 15px 8px; text-align: center; border-bottom: 1px solid #1e293b; font-size: 1.1rem; font-weight: 600; }
        
        .tap-col { color: var(--gold); }
        .dur-col { color: #94a3b8; font-weight: 400; font-size: 0.9rem; }
        .tow-col { color: var(--accent); }

        .aide-section { margin-top: 40px; border-top: 2px solid var(--border); padding-top: 20px; }
        .aide-image { width: 100%; border-radius: 12px; margin-bottom: 20px; border: 1px solid var(--border); }
        .abbr-table { background: var(--card); border-radius: 12px; overflow: hidden; font-size: 0.85rem; width: 100%; }
        .abbr-table td { text-align: left; padding: 10px; font-weight: normal; border-bottom: 1px solid var(--border); font-size: 0.9rem; }
        .abbr-table .code { font-weight: bold; color: var(--accent); width: 30%; }
    </style>
</head>
<body>

<div class="container">
    <h2>BA Calculator</h2>
    
    <div class="input-card">
        <div class="label-text">Time of Entry & Elapsed Time (Mins)</div>
        <div class="input-row">
            <input type="time" id="entryTime">
            <input type="number" id="elapsedMins" value="0" min="0" placeholder="0">
            <button onclick="setCurrentTime()">NOW</button>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>BAR</th>
                <th>TAP</th>
                <th>DUR</th>
                <th>TOW</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <div class="aide-section">
        <h3>Aide Memoire</h3>
        <img src="20486.png" alt="BA Board Instructions" class="aide-image">
        
        <table class="abbr-table">
            <thead>
                <tr>
                    <th style="text-align: left; padding-left: 10px;">ABBR.</th>
                    <th style="text-align: left;">MEANING</th>
                </tr>
            </thead>
            <tbody id="abbrBody">
                </tbody>
        </table>
    </div>
</div>

<script>
    // Exact data from image
    const baData = [
        { bar: 300, dur: 38 }, { bar: 290, dur: 37 }, { bar: 280, dur: 35 },
        { bar: 270, dur: 33 }, { bar: 260, dur: 32 }, { bar: 250, dur: 30 },
        { bar: 240, dur: 28 }, { bar: 160, dur: 16 }
    ];

    const abbreviations = [
        ["FFT", "Fire Fighting Team"], ["HRJ", "Hose Reel Jet"], ["J", "Main Jet (45/70mm)"],
        ["LH / RH", "Left/Right Hand"], ["SRT", "Search and Rescue Team"], ["TIC", "Thermal Image Camera"],
        ["TAP", "Turn Around Pressure"], ["A1, A2...", "Team Alpha One etc."], ["CL", "Casualty Located"],
        ["TL", "Team Leader"], ["COMMS", "Radio Communications"], ["RE", "Re-Entry"]
    ];

    const entryInput = document.getElementById('entryTime');
    const elapsedInput = document.getElementById('elapsedMins');

    function setCurrentTime() {
        const now = new Date();
        entryInput.value = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
        renderTable();
    }

    function renderTable() {
        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = '';
        if (!entryInput.value) return;

        const [hrs, mins] = entryInput.value.split(':').map(Number);
        const elapsed = parseInt(elapsedInput.value) || 0;

        baData.forEach(row => {
            const tap = (row.bar / 2) + 40; // TAP formula
            const remainingDur = Math.max(0, row.dur - elapsed);
            
            const time = new Date();
            time.setHours(hrs, mins + remainingDur);
            const tow = time.getHours().toString().padStart(2, '0') + ":" + time.getMinutes().toString().padStart(2, '0');

            tbody.innerHTML += `
                <tr>
                    <td>${row.bar}</td>
                    <td class="tap-col">${tap}</td>
                    <td class="dur-col">${remainingDur}m</td>
                    <td class="tow-col">${tow}</td>
                </tr>`;
        });
    }

    function loadAbbr() {
        const abbrBody = document.getElementById('abbrBody');
        abbreviations.forEach(item => {
            abbrBody.innerHTML += `<tr><td class="code">${item[0]}</td><td>${item[1]}</td></tr>`;
        });
    }

    entryInput.addEventListener('change', renderTable);
    elapsedInput.addEventListener('input', renderTable);
    window.onload = () => { setCurrentTime(); loadAbbr(); };
</script>

</body>
</html>
